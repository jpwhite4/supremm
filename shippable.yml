language: none
env:
    - IMAGE_NAME="pseudo_repo/supremm_centos7" DOCKERFILE=dockerfile.centos7
    - IMAGE_NAME="pseudo_repo/supremm_centos6" DOCKERFILE=dockerfile.centos6
build:
    pre_ci:
        - docker build -t $IMAGE_NAME:latest -f $DOCKERFILE .
    pre_ci_boot:
        image_name: $IMAGE_NAME
        image_tag: latest
        pull: false
        options: "--user root -e HOME=/root"
    ci:
        - python setup.py install
        - python setup.py develop
        - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
        - nosetests --with-coverage --cover-erase --cover-package=supremm --cover-branches --cover-xml --cover-xml-file=shippable/codecoverage/coverage.xml
